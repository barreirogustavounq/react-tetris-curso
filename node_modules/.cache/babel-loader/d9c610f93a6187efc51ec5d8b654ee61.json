{"ast":null,"code":"import _slicedToArray from\"C:/Users/Gustavo/Desktop/repositorios/react-tetris-curso/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import\"./styles/figureImages.css\";import{createStage,checkCollision}from\"../GameHelpers\";//componentes\nimport Stage from\"./Stage\";import Display from\"./Display\";import StartButton from\"./StartButton\";import PauseButton from\"./PauseButton\";//custom hooks\nimport{useInterval}from\"../hooks/useInterval\";import{usePlayer}from\"../hooks/UsePlayer\";import{proxNext}from\"../hooks/UsePlayer\";import{useStage}from\"../hooks/UseStage\";import{useGameStatus}from\"../hooks/UseGameStatus\";//Styled componentes\nimport{StyledTetrisWrapper,StyledTetris}from\"./styles/StyledTetris\";//Figuras\nimport I from\"../img/I.png\";import J from\"../img/J.png\";import L from\"../img/L.png\";import O from\"../img/O.png\";import S from\"../img/S.png\";import T from\"../img/T.png\";import Z from\"../img/Z.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Tetris=function Tetris(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),dropTime=_useState2[0],setDropTime=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),gameOver=_useState4[0],setGameOver=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),pause=_useState6[0],setPause=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),started=_useState8[0],setStarted=_useState8[1];var _usePlayer=usePlayer(),_usePlayer2=_slicedToArray(_usePlayer,4),player=_usePlayer2[0],updatePlayerPos=_usePlayer2[1],resetPlayer=_usePlayer2[2],playerRotate=_usePlayer2[3];var _useStage=useStage(player,resetPlayer),_useStage2=_slicedToArray(_useStage,3),stage=_useStage2[0],setStage=_useStage2[1],rowsCleared=_useStage2[2];var _useGameStatus=useGameStatus(rowsCleared),_useGameStatus2=_slicedToArray(_useGameStatus,6),score=_useGameStatus2[0],setScore=_useGameStatus2[1],rows=_useGameStatus2[2],setRows=_useGameStatus2[3],level=_useGameStatus2[4],setLevel=_useGameStatus2[5];var movePlayer=function movePlayer(dir){if(!checkCollision(player,stage,{x:dir,y:0})){updatePlayerPos({x:dir,y:0});}};var keyUp=function keyUp(_ref){var keyCode=_ref.keyCode;if(!gameOver){if(!pause){if(keyCode===40){setDropTime(1000);}}}};var getImage=function getImage(tetromino){switch(tetromino){case\"I\":return I;case\"J\":return J;case\"L\":return L;case\"O\":return O;case\"S\":return S;case\"T\":return T;case\"X\":return Z;default:break;}};var startGame=function startGame(){setStage(createStage());setDropTime(1000);resetPlayer();setScore(0);setRows(0);setLevel(0);setGameOver(false);setStarted(true);setPause(false);};var pauseGame=function pauseGame(){if(!gameOver){if(!pause){setDropTime(null);setPause(true);}else{setDropTime(1000);setPause(false);}}};var drop=function drop(){if(rows>(level+1)*10){setLevel(function(prev){return prev+1;});setDropTime(1000/(level+1)+200);}if(!checkCollision(player,stage,{x:0,y:1})){updatePlayerPos({x:0,y:1,collided:false});}else{if(player.pos.y<1){console.log(\"GAME OVER\");setGameOver(true);setDropTime(null);setStarted(false);}updatePlayerPos({x:0,y:0,collided:true});}};var dropPlayer=function dropPlayer(){setDropTime(null);drop();};useInterval(function(){drop();},dropTime);var move=function move(_ref2){var keyCode=_ref2.keyCode;if(!gameOver){if(!pause){if(keyCode===37){movePlayer(-1);}else if(keyCode===39){movePlayer(1);}else if(keyCode===40){dropPlayer();}else if(keyCode===38){playerRotate(stage,1);}}}};return/*#__PURE__*/_jsx(StyledTetrisWrapper,{role:\"button\",tabIndex:\"0\",onKeyDown:function onKeyDown(e){e.preventDefault();move(e);},onKeyUp:keyUp,children:/*#__PURE__*/_jsxs(StyledTetris,{children:[/*#__PURE__*/_jsx(Stage,{stage:stage}),/*#__PURE__*/_jsxs(\"aside\",{children:[gameOver?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Display,{gameOver:gameOver,text:\"Game Over\"}),/*#__PURE__*/_jsx(Display,{text:\"Score: \".concat(score)})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Display,{text:\"Score: \".concat(score)}),/*#__PURE__*/_jsx(Display,{text:\"Rows: \".concat(rows)}),/*#__PURE__*/_jsx(Display,{text:\"Level: \".concat(level)})]}),/*#__PURE__*/_jsx(StartButton,{callback:startGame}),/*#__PURE__*/_jsx(PauseButton,{gameOver:gameOver,pause:pause,started:started,callback:pauseGame}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"next\",children:\" Next:\"}),/*#__PURE__*/_jsx(\"img\",{className:\"figure\",src:getImage(proxNext.name),alt:\"avatar\"})]})]})]})});};export default Tetris;","map":{"version":3,"sources":["C:/Users/Gustavo/Desktop/repositorios/react-tetris-curso/src/components/Tetris.js"],"names":["React","useState","createStage","checkCollision","Stage","Display","StartButton","PauseButton","useInterval","usePlayer","proxNext","useStage","useGameStatus","StyledTetrisWrapper","StyledTetris","I","J","L","O","S","T","Z","Tetris","dropTime","setDropTime","gameOver","setGameOver","pause","setPause","started","setStarted","player","updatePlayerPos","resetPlayer","playerRotate","stage","setStage","rowsCleared","score","setScore","rows","setRows","level","setLevel","movePlayer","dir","x","y","keyUp","keyCode","getImage","tetromino","startGame","pauseGame","drop","prev","collided","pos","console","log","dropPlayer","move","e","preventDefault","name"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nimport \"./styles/figureImages.css\";\r\n\r\nimport { createStage, checkCollision } from \"../GameHelpers\";\r\n//componentes\r\nimport Stage from \"./Stage\";\r\nimport Display from \"./Display\";\r\nimport StartButton from \"./StartButton\";\r\nimport PauseButton from \"./PauseButton\";\r\n\r\n//custom hooks\r\nimport { useInterval } from \"../hooks/useInterval\";\r\nimport {usePlayer} from \"../hooks/UsePlayer\";\r\nimport {proxNext} from \"../hooks/UsePlayer\";\r\nimport { useStage } from \"../hooks/UseStage\";\r\nimport { useGameStatus } from \"../hooks/UseGameStatus\";\r\n//Styled componentes\r\nimport { StyledTetrisWrapper, StyledTetris } from \"./styles/StyledTetris\";\r\n\r\n//Figuras\r\nimport I from \"../img/I.png\"\r\nimport J from \"../img/J.png\"\r\nimport L from \"../img/L.png\"\r\nimport O from \"../img/O.png\"\r\nimport S from \"../img/S.png\"\r\nimport T from \"../img/T.png\"\r\nimport Z from \"../img/Z.png\"\r\n\r\nconst Tetris = () => {\r\n  const [dropTime, setDropTime] = useState(null);\r\n  const [gameOver, setGameOver] = useState(false);\r\n  const [pause, setPause] = useState(false);\r\n  const [started, setStarted] = useState(false);\r\n\r\n  const [player, updatePlayerPos, resetPlayer, playerRotate] = usePlayer();\r\n  const [stage, setStage, rowsCleared] = useStage(player, resetPlayer);\r\n\r\n  const [score, setScore, rows, setRows, level, setLevel] = useGameStatus(\r\n    rowsCleared\r\n  );\r\n\r\n  const movePlayer = (dir) => {\r\n    if (!checkCollision(player, stage, { x: dir, y: 0 })) {\r\n      updatePlayerPos({ x: dir, y: 0 });\r\n    }\r\n  };\r\n  const keyUp = ({ keyCode }) => {\r\n    if (!gameOver) {\r\n      if (!pause) {\r\n        if (keyCode === 40) {\r\n          setDropTime(1000);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  \r\n  const getImage = (tetromino) =>{\r\n    switch (tetromino) {\r\n      case \"I\":\r\n        return I\r\n     \r\n      case \"J\":\r\n        return J\r\n     \r\n      case \"L\":\r\n        return L\r\n     \r\n      case \"O\":\r\n        return O\r\n     \r\n      case \"S\":\r\n        return S\r\n     \r\n      case \"T\":\r\n        return T\r\n     \r\n      case \"X\":\r\n        return Z\r\n     \r\n      default:\r\n        break;\r\n    }\r\n  } \r\n\r\n  const startGame = () => {\r\n    setStage(createStage());\r\n    setDropTime(1000);\r\n    resetPlayer();\r\n    setScore(0);\r\n    setRows(0);\r\n    setLevel(0);\r\n    setGameOver(false);\r\n    setStarted(true);\r\n    setPause(false);\r\n  };\r\n\r\n  const pauseGame = () => {\r\n    if (!gameOver) {\r\n      if (!pause) {\r\n        setDropTime(null);\r\n        setPause(true);\r\n      } else {\r\n        setDropTime(1000);\r\n        setPause(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const drop = () => {\r\n    if (rows > (level + 1) * 10) {\r\n      setLevel((prev) => prev + 1);\r\n\r\n      setDropTime(1000 / (level + 1) + 200);\r\n    }\r\n\r\n    if (!checkCollision(player, stage, { x: 0, y: 1 })) {\r\n      updatePlayerPos({ x: 0, y: 1, collided: false });\r\n    } else {\r\n      if (player.pos.y < 1) {\r\n        console.log(\"GAME OVER\");\r\n        setGameOver(true);\r\n        setDropTime(null);\r\n        setStarted(false);\r\n      }\r\n      updatePlayerPos({ x: 0, y: 0, collided: true });\r\n    }\r\n  };\r\n\r\n  const dropPlayer = () => {\r\n    setDropTime(null);\r\n    drop();\r\n  };\r\n\r\n  useInterval(() => {\r\n    drop();\r\n  }, dropTime);\r\n\r\n  const move = ({ keyCode }) => {\r\n    if (!gameOver) {\r\n      if (!pause) {\r\n        if (keyCode === 37) {\r\n          movePlayer(-1);\r\n        } else if (keyCode === 39) {\r\n          movePlayer(1);\r\n        } else if (keyCode === 40) {\r\n          dropPlayer();\r\n        } else if (keyCode === 38) {\r\n          playerRotate(stage, 1);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <StyledTetrisWrapper\r\n      role=\"button\"\r\n      tabIndex=\"0\"\r\n      onKeyDown={(e) => {\r\n        e.preventDefault();\r\n        move(e);\r\n      }}\r\n      onKeyUp={keyUp}\r\n    >\r\n      <StyledTetris>\r\n        <Stage stage={stage} />\r\n        <aside>\r\n          {gameOver ? (\r\n            <div>\r\n              <Display gameOver={gameOver} text=\"Game Over\" />\r\n              <Display text={`Score: ${score}`} />\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <Display text={`Score: ${score}`} />\r\n              <Display text={`Rows: ${rows}`} />\r\n              <Display text={`Level: ${level}`} />\r\n            </div>\r\n          )}\r\n          <StartButton callback={startGame} />\r\n          <PauseButton\r\n            gameOver={gameOver}\r\n            pause={pause}\r\n            started={started}\r\n            callback={pauseGame}\r\n          />\r\n          <div className=\"preview\">\r\n            <p className=\"next\"> Next:</p>\r\n            <img\r\n              className=\"figure\"\r\n              src={getImage(proxNext.name)}\r\n              alt=\"avatar\"\r\n            />\r\n          </div>\r\n        </aside>\r\n      </StyledTetris>\r\n    </StyledTetrisWrapper>\r\n  );\r\n};\r\n\r\nexport default Tetris;\r\n"]},"metadata":{},"sourceType":"module"}